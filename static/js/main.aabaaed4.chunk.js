(this["webpackJsonpmovie-db-1"]=this["webpackJsonpmovie-db-1"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a(17)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(6),r=a.n(c),i=a(7),s=a(1),o=a(2),u=a(4),m=a(3);a(13),a(14);var d=function(e){var t=function(t){return function(){return e.sort(t)}},a=function(t){return e.sortBy===t?"btn btn-active":"btn"};return l.a.createElement("div",{className:"d-flex-btn"},l.a.createElement("div",{className:"btn-inner"},l.a.createElement("button",{className:a("popularity.desc"),onClick:t("popularity.desc")},"Popularity")),l.a.createElement("div",{className:"btn-inner"},l.a.createElement("button",{className:a("revenue.desc"),onClick:t("revenue.desc")},"Revenue")),l.a.createElement("div",{className:"btn-inner"},l.a.createElement("button",{className:a("vote_average.desc"),onClick:t("vote_average.desc")},"Vote avg")))};a(15);var h=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"total-pages"},l.a.createElement("p",{className:"total-pages-nested"},"Total pages: ",e.totalPages)),l.a.createElement("div",{className:"pagination"},l.a.createElement("button",{type:"button",className:"btn-prev",disabled:1===e.currentPage,onClick:e.prevPage},"Prev"),l.a.createElement("p",{className:"current"},e.currentPage),l.a.createElement("button",{type:"button",className:"btn-next",disabled:500===e.currentPage,onClick:e.nextPage},"Next")))},v=(a(16),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={willWatchBtn:!1},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.movie,n=t.deleteMovie,c=t.willWatch,r=t.willWatchDelete;return l.a.createElement("div",{key:a.id,className:"card"},l.a.createElement("img",{className:"poster",src:"https://image.tmdb.org/t/p/w500".concat(a.backdrop_path),alt:""}),l.a.createElement("p",{className:"title"},a.title),l.a.createElement("p",{className:"rating"},"Rating: ",a.vote_average),this.state.willWatchBtn?l.a.createElement("button",{className:"will-watch-btn-active",onClick:function(){e.setState({willWatchBtn:!1}),r(a)}},"Will watch"):l.a.createElement("button",{className:"will-watch-btn",onClick:function(){e.setState({willWatchBtn:!0}),c(a)}},"Will watch"),l.a.createElement("button",{className:"delete",onClick:function(){return n(a)}},"Delete"))}}]),a}(l.a.Component)),g=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).deleteMovie=function(t){var a=e.state.movies.filter((function(e){return e.id!==t.id})),n=e.deleteFromWillWatch(t);e.setState({movies:a,willWatch:n})},e.deleteFromWillWatch=function(t){return e.state.willWatch.filter((function(e){return e.id!==t.id}))},e.delFromWillWatch=function(t){var a=e.state.willWatch.filter((function(e){return e.id!==t.id}));e.setState({willWatch:a})},e.willWatchHandler=function(t){var a=[].concat(Object(i.a)(e.state.willWatch),[t]);e.setState({willWatch:a})},e.willWatchDeleteHandler=function(t){var a=e.state.willWatch.filter((function(e){return e.id!==t.id}));e.setState({willWatch:a})},e.sortByHandler=function(t){e.setState({sortBy:t,currentPage:1})},e.getMovies=function(){fetch("".concat("https://cors-anywhere.herokuapp.com/").concat("https://api.themoviedb.org/3","/discover/movie?api_key=").concat("dd4d3580d5d050f5ede3676f3a13bb25","&sort_by=").concat(e.state.sortBy,"&page=").concat(e.state.currentPage)).then((function(e){return e.json()})).then((function(t){console.log("fetching"),e.setState({movies:t.results,currentPage:t.page,totalPages:t.total_pages})}))},e.nextPageHandler=function(){500!==e.state.currentPage&&e.setState({currentPage:e.state.currentPage+1})},e.prevPageHandler=function(){1!==e.state.currentPage&&e.setState({currentPage:e.state.currentPage-1})},e.justForTest=function(e){console.log(e.id),console.log("clicked")},e.state={movies:[],willWatch:[],sortBy:"popularity.desc",currentPage:null,totalPages:null},console.log("constructor"),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){console.log("did mount"),this.getMovies()}},{key:"componentDidUpdate",value:function(e,t){t.sortBy!==this.state.sortBy&&this.getMovies(),t.currentPage!==this.state.currentPage&&this.getMovies()}},{key:"render",value:function(){var e=this;return console.log("render"),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"tabs"},l.a.createElement("div",{className:"tabs-inner"},l.a.createElement(d,{sortBy:this.state.sortBy,sort:this.sortByHandler}))),l.a.createElement("div",{className:"pagination-container"},l.a.createElement(h,{currentPage:this.state.currentPage,totalPages:this.state.totalPages,nextPage:this.nextPageHandler,prevPage:this.prevPageHandler})),l.a.createElement("div",{className:"d-flex"},l.a.createElement("div",{className:"grid"},this.state.movies.map((function(t){return l.a.createElement(v,{key:t.id,movie:t,deleteMovie:e.deleteMovie,willWatch:e.willWatchHandler,willWatchDelete:e.willWatchDeleteHandler})}))),l.a.createElement("div",{className:"will-watch"},l.a.createElement("div",{className:"will-watch-nested"},l.a.createElement("p",null,"Will watch: ",this.state.willWatch.length),this.state.willWatch.map((function(t){return l.a.createElement("div",{key:t.id},l.a.createElement("p",{onClick:function(){return e.delFromWillWatch(t)}},t.title))}))))),l.a.createElement(h,{currentPage:this.state.currentPage,totalPages:this.state.totalPages,nextPage:this.nextPageHandler,prevPage:this.prevPageHandler}))}}]),a}(l.a.Component);r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(g,null)),document.getElementById("root"))}],[[8,1,2]]]);
//# sourceMappingURL=main.aabaaed4.chunk.js.map